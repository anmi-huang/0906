"use strict";function createProductCard(t,e){return'\n  <li class="col-md-6 mb-3 ">\n    <div class="card border border-secondary">\n        <a href="#" class="text-decoration-none ">\n            <div>\n                <img src="'.concat(t.imgUrl,'" class="img-card d-block position-relative w-100">\n            </div>\n            <div class="card-span position-absolute fz-16px">\n                <span class=" text-white fz-16px px-1 py-1">本日精選</span>\n            </div>\n            <div class="d-flex text-center text-primary fz-18px fz-md-20px">\n                <div class="flex-grow-1  ff-ping-fang-tc-light text-cart-font border border-secondary  border-right-0  border-left-0 py-1">').concat(t.itemName,'</div>\n                <div class="flex-grow-1  ff-ping-fang-tc-semibold border-secondary border border-right-0 py-1 ">NT$ ').concat(t.price,'</div>\n            </div>\n        </a>\n    \t<button id="js-product-btn" data-addbtn="').concat(e,'"  data-cart="').concat(t.id,'" class="js-product-row add-item-tr fz-22px fz-md-28px btn-add bg-secondary text-center text-primary w-100 py-2"id="btn-cart" >\n    \t\t\t加入購物車\n    \t</button>\n        <div class="btn-card position-absolute ">\n            <button >\n                <i class="far fa-heart fz-22px text-primary"></i>\n            </button>\n        </div>\n    </div>\n  </li>\n    ')}function Cart(){this.key="example-cart",this.key2="example-cart2",this.itemList=[],this.initCart=function(){var t=localStorage.getItem(this.key);t&&(this.itemList=JSON.parse(t)),this.render()},this.addItem=function(t,e){var n=this.itemList,r=productsData[t],i=n.findIndex(function(t){return t.id===e});if(n[i])n[i].amount+=1;else{var c=r;c.amount=1,this.itemList.push(c)}this.updateDataToStorage(),this.cartNumberRender()},this.btnAddItem=function(t){document.querySelector("#js-count-".concat(t)).innerHTML=++this.itemList[t].amount,this.updateDataToStorage(),this.countRender(t)},this.btnMinuserItem=function(t){this.itemList[t].amount<=1||(document.querySelector("#js-count-".concat(t)).innerHTML=--this.itemList[t].amount,this.updateDataToStorage(),this.countRender(t))},this.deleteItem=function(t,e){document.querySelector("#js-item-".concat(t)).remove();var n=this.itemList.findIndex(function(t){return t.id===e});this.itemList.splice(n,1),this.updateTotal(),this.cartNumberRender(),this.updateDataToStorage()},this.updateDataToStorage=function(){var t=JSON.stringify(this.itemList);localStorage.setItem(this.key,t)},this.updateTotal=function(){var t=0,e=0,n=300;this.itemList.forEach(function(r){var i=r.price*r.amount;t+=i,e=t+n}),jsTotal.innerHTML="NT$ ".concat(t),jsFee.innerHTML="NT$ ".concat(n),jsSum.innerHTML="NT$ ".concat(e)},this.countRender=function(t){document.querySelector("#js-value-".concat(t)).innerHTML="NT$ ".concat(this.itemList[t].amount*this.itemList[t].price),this.updateTotal()},this.cartNumberRender=function(){cartNumber.innerHTML='\n        <span class="cart-number-size rounded-circle w-5 h-5 position-absolute text-center text-primary bg-secondary fz-24"> \n        '.concat(this.itemList.length,"\n         </span>\n         ")},this.render=function(){this.cartNumberRender();var t,e,n=0,r=0,i=300;this.itemList.forEach(function(c,a){var o=c.price*c.amount;n+=o,r=n+i;var s='   \n         <li id="js-item-'.concat(a,'" class=" row g-0 col-md-12 mb-2 pb-2 mx-0 px-0 border-cart border-secondary text-primary align-items-center  justify-content-between ff-ping-fang-tc-semibold  ">\n               \n            <div class="col-6 col-md-3 pl-0">\n                <img src="').concat(c.imgUrl,'" class="cart-img w-100 ">\n            </div>\n\n            <div class=" row g-0 col-6 col-md-6 ff-ping-fang-tc-light align-items-center">\n                <div class="col-md-6 ">\n                    <div class="fz-20px">').concat(c.itemName,'</div>\n                    <div class="ff-Helvetica-neue-regular py-2px">NT$ ').concat(c.price,'</div>\n                </div>\n\n                <div class="col-md-6 d-flex  ">\n                    <button  data-minuser="').concat(a,'" class=" js-minuser  w-6 h-6 ff-ping-fang-tc-light border border-right-0 text-center btn-active"><i class="icon icon-minus text-primary pointer-events-none"></i></button>\n                    <div id="js-count-').concat(a,'" class="d-flex justify-content-center align-items-center w-6 h-6 ff-ping-fang-tc-light border border-right-0">').concat(c.amount,'</div>\n                    <button  data-adder="').concat(a,'" class=" js-adder  w-6 h-6 ff-ping-fang-tc-light  border text-center btn-active"><i class="icon icon-add text-primary pointer-events-none"></i></button></button> \n                </div>   \n            </div>\n\n            <div class="col-12 col-md-3 d-flex  px-0"> \n                    <div  id="js-value-').concat(a,'" class="price-border col-md-10 fz-20px py-1 border border-secondary border-right-0 border-left-0  text-right text-md-left ">\n                    NT$ ').concat(o,'\n                    </div>\n                    <button id="js-btn" class="col-md-2 d-none d-md-block text-right pr-0 " data-btn="').concat(a,'" data-pid="').concat(c.id,'" ><img src="./img/trash.svg" alt=""class="pointer-events-none w-2">\n                    </button>\n            </div> \n        </li>\n        '),d='\n             <li id="js-item-'.concat(a,'" class=" row g-0 mx-0 px-0 col-md-12  align-items-center ff-ping-fang-tc-semibold  ">\n                <div class="col-md-6 ">\n                    <img src="').concat(c.imgUrl,'" class="cart-img w-100 h-10 px-2">\n                </div>\n                <div class=" row g-0 col-md-6 ff-ping-fang-tc-light ">\n                    <div>\n                        <div class="fz-16px">').concat(c.itemName,"&nbsp; (").concat(c.amount,')</div>\n                        <div id="js-value-').concat(a,'" class="fz-20px text-left">NT$ ').concat(o,"</div>\n                    </div>\n                </div>\n            </li>\n        ");t=s,cartList&&(cartList.innerHTML+=t),e=d,shoppingList&&(shoppingList.innerHTML+=e)}),cartOrder&&(jsTotal.innerHTML="NT$ ".concat(n),jsFee.innerHTML="NT$ ".concat(i),jsSum.innerHTML="NT$ ".concat(r))}}var productsData,citiesData,jsTotal=document.querySelector("#js-total"),jsFee=document.querySelector("#js-fee"),jsSum=document.querySelector("#js-sum"),cartNumber=document.querySelector("#cart-number"),cartOrder=document.querySelector("#cart-order"),cartList=document.querySelector("#cart-list"),jsProductRow=document.querySelector(".js-product-row"),productRow=document.querySelector("#product-row"),jsProductBtn=document.querySelector("#js-product-btn"),shoppingList=document.querySelector("#shopping-list");productRow&&fetch("api/dessert.json").then(function(t){return t.json()}).then(function(t){var e=t.products;productsData=e;var n=" ";productsData.forEach(function(t,e){var r=createProductCard(t,e);n+=r}),productRow&&(productRow.innerHTML=n),productRow.addEventListener("click",function(t){if(t.target.dataset.addbtn){var e=1*t.target.dataset.cart;cart.addItem(t.target.dataset.addbtn,e)}})});var cart=new Cart;cart.initCart(),cartList&&cartList.addEventListener("click",function(t){var e,n=t.target;if(n.matches(".js-adder")&&(e=n.dataset.adder,cart.btnAddItem(e)),n.matches(".js-minuser")&&(e=n.dataset.minuser,cart.btnMinuserItem(e)),n.matches("#js-btn")){var r=confirm("確定要刪除嗎？");e=n.dataset.btn;var i=1*n.dataset.pid;r&&cart.deleteItem(e,i)}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdsb2JhbC5qcyJdLCJuYW1lcyI6WyJjcmVhdGVQcm9kdWN0Q2FyZCIsInByb2R1Y3QiLCJpbmRleCIsImNvbmNhdCIsImltZ1VybCIsIml0ZW1OYW1lIiwicHJpY2UiLCJpZCIsIkNhcnQiLCJ0aGlzIiwia2V5Iiwia2V5MiIsIml0ZW1MaXN0IiwiaW5pdENhcnQiLCJsb2NhbERhdGFTdHJpbmciLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiSlNPTiIsInBhcnNlIiwicmVuZGVyIiwiYWRkSXRlbSIsImlkeCIsInBpZCIsImxpc3QiLCJwcm9kdWN0c0RhdGEiLCJmaW5kSWR4IiwiZmluZEluZGV4IiwiaXRlbSIsImFtb3VudCIsInB1c2giLCJ1cGRhdGVEYXRhVG9TdG9yYWdlIiwiY2FydE51bWJlclJlbmRlciIsImJ0bkFkZEl0ZW0iLCJpIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5uZXJIVE1MIiwiY291bnRSZW5kZXIiLCJidG5NaW51c2VySXRlbSIsImRlbGV0ZUl0ZW0iLCJyZW1vdmUiLCJpZHhSZW1vdmUiLCJzcGxpY2UiLCJ1cGRhdGVUb3RhbCIsImRhdGFTdHJpbmciLCJzdHJpbmdpZnkiLCJzZXRJdGVtIiwiY2FydFZhbHVlIiwiY2FydFN1bSIsImZlZSIsImZvckVhY2giLCJpdGVtVmFsdWUiLCJqc1RvdGFsIiwianNGZWUiLCJqc1N1bSIsImNhcnROdW1iZXIiLCJsZW5ndGgiLCJzdHIiLCJzaHAiLCJ0ciIsImNhcnRMaXN0Iiwic2hvcHBpbmdMaXN0IiwiY2FydE9yZGVyIiwiY2l0aWVzRGF0YSIsImpzUHJvZHVjdFJvdyIsInByb2R1Y3RSb3ciLCJqc1Byb2R1Y3RCdG4iLCJmZXRjaCIsInRoZW4iLCJyZXNwIiwianNvbiIsIl9yZWYiLCJwcm9kdWN0cyIsImNhcmQiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInRhcmdldCIsImRhdGFzZXQiLCJhZGRidG4iLCJjYXJ0SWQiLCJjYXJ0IiwibWF0Y2hlcyIsImFkZGVyIiwi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UUFBUXZELEdBQ3ZCOEQsSUFDSkosS0FBS3pDLFdBQVdyQyxFQUFNb0IiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCBwcm9kdWN0c0RhdGFcbmxldCBjaXRpZXNEYXRhXG5jb25zdCBqc1RvdGFsPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNqcy10b3RhbGApXG5jb25zdCBqc0ZlZT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjanMtZmVlYClcbmNvbnN0IGpzU3VtPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNqcy1zdW1gKVxuY29uc3QgY2FydE51bWJlcj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjY2FydC1udW1iZXJgKVxuY29uc3QgY2FydE9yZGVyPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNjYXJ0LW9yZGVyYClcbmNvbnN0IGNhcnRMaXN0PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNjYXJ0LWxpc3RgKVxuY29uc3QganNQcm9kdWN0Um93PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5qcy1wcm9kdWN0LXJvd2ApXG5jb25zdCBwcm9kdWN0Um93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2R1Y3Qtcm93JylcbmNvbnN0IGpzUHJvZHVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNqcy1wcm9kdWN0LWJ0bicpXG4gXG5jb25zdCBzaG9wcGluZ0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2hvcHBpbmctbGlzdCcpXG5cbmZ1bmN0aW9uIGNyZWF0ZVByb2R1Y3RDYXJkKHByb2R1Y3QsaW5kZXgpIHtcbiAgICByZXR1cm4gYFxuICA8bGkgY2xhc3M9XCJjb2wtbWQtNiBtYi0zIFwiPlxuICAgIDxkaXYgY2xhc3M9XCJjYXJkIGJvcmRlciBib3JkZXItc2Vjb25kYXJ5XCI+XG4gICAgICAgIDxhIGhyZWY9XCIjXCIgY2xhc3M9XCJ0ZXh0LWRlY29yYXRpb24tbm9uZSBcIj5cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke3Byb2R1Y3QuaW1nVXJsfVwiIGNsYXNzPVwiaW1nLWNhcmQgZC1ibG9jayBwb3NpdGlvbi1yZWxhdGl2ZSB3LTEwMFwiPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1zcGFuIHBvc2l0aW9uLWFic29sdXRlIGZ6LTE2cHhcIj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIiB0ZXh0LXdoaXRlIGZ6LTE2cHggcHgtMSBweS0xXCI+5pys5pel57K+6YG4PC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZC1mbGV4IHRleHQtY2VudGVyIHRleHQtcHJpbWFyeSBmei0xOHB4IGZ6LW1kLTIwcHhcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleC1ncm93LTEgIGZmLXBpbmctZmFuZy10Yy1saWdodCB0ZXh0LWNhcnQtZm9udCBib3JkZXIgYm9yZGVyLXNlY29uZGFyeSAgYm9yZGVyLXJpZ2h0LTAgIGJvcmRlci1sZWZ0LTAgcHktMVwiPiR7cHJvZHVjdC5pdGVtTmFtZX08L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleC1ncm93LTEgIGZmLXBpbmctZmFuZy10Yy1zZW1pYm9sZCBib3JkZXItc2Vjb25kYXJ5IGJvcmRlciBib3JkZXItcmlnaHQtMCBweS0xIFwiPk5UJCAke3Byb2R1Y3QucHJpY2V9PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9hPlxuICAgIFx0PGJ1dHRvbiBpZD1cImpzLXByb2R1Y3QtYnRuXCIgZGF0YS1hZGRidG49XCIke2luZGV4fVwiICBkYXRhLWNhcnQ9XCIke3Byb2R1Y3QuaWR9XCIgY2xhc3M9XCJqcy1wcm9kdWN0LXJvdyBhZGQtaXRlbS10ciBmei0yMnB4IGZ6LW1kLTI4cHggYnRuLWFkZCBiZy1zZWNvbmRhcnkgdGV4dC1jZW50ZXIgdGV4dC1wcmltYXJ5IHctMTAwIHB5LTJcImlkPVwiYnRuLWNhcnRcIiA+XG4gICAgXHRcdFx05Yqg5YWl6LO854mp6LuKXG4gICAgXHQ8L2J1dHRvbj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImJ0bi1jYXJkIHBvc2l0aW9uLWFic29sdXRlIFwiPlxuICAgICAgICAgICAgPGJ1dHRvbiA+XG4gICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYXIgZmEtaGVhcnQgZnotMjJweCB0ZXh0LXByaW1hcnlcIj48L2k+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvbGk+XG4gICAgYDtcbn1cblxuZnVuY3Rpb24gQ2FydCgpIHtcbiAgICB0aGlzLmtleSA9J2V4YW1wbGUtY2FydCc7XG4gICAgdGhpcy5rZXkyID0nZXhhbXBsZS1jYXJ0Mic7XG4gICAgdGhpcy5pdGVtTGlzdCA9IFtdO1xuICAgIHRoaXMuaW5pdENhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IGxvY2FsRGF0YVN0cmluZyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMua2V5KTtcbiAgICAgICAgaWYgKGxvY2FsRGF0YVN0cmluZykge1xuICAgICAgICAgICAgdGhpcy5pdGVtTGlzdCA9IEpTT04ucGFyc2UobG9jYWxEYXRhU3RyaW5nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH1cblxuICAgIHRoaXMuYWRkSXRlbSA9IGZ1bmN0aW9uIChpZHgscGlkKSB7XG4gICAgICAgICAgXG4gICAgICAgIGxldCBsaXN0PXRoaXMuaXRlbUxpc3RcbiAgICAgICAgY29uc3QgcHJvZHVjdD1wcm9kdWN0c0RhdGFbaWR4XSBcbiAgICAgICAgY29uc3QgZmluZElkeCA9IGxpc3QuZmluZEluZGV4KChpdGVtKT0+aXRlbS5pZD09PXBpZClcbiAgICAgICAgaWYgKGxpc3RbZmluZElkeF0pIHtcbiAgICAgICAgICAgIGxpc3RbZmluZElkeF0uYW1vdW50Kz0xIFxuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICBjb25zdCBpdGVtPXByb2R1Y3RcbiAgICAgICAgICAgIGl0ZW0uYW1vdW50PTFcbiAgICAgICAgICAgIHRoaXMuaXRlbUxpc3QucHVzaChpdGVtKTtcbiAgICAgICAgICAgIH0gICAgICAgIFxuICAgIHRoaXMudXBkYXRlRGF0YVRvU3RvcmFnZSgpO1xuICAgIHRoaXMuY2FydE51bWJlclJlbmRlcigpO1xufSAgIFxuICAgIHRoaXMuYnRuQWRkSXRlbSA9IGZ1bmN0aW9uIChpKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNqcy1jb3VudC0ke2l9YCkuaW5uZXJIVE1MID0rK3RoaXMuaXRlbUxpc3RbaV0uYW1vdW50IFxuICAgICAgICB0aGlzLnVwZGF0ZURhdGFUb1N0b3JhZ2UoKTtcbiAgICAgICAgdGhpcy5jb3VudFJlbmRlcihpKVxuICAgIH1cbiAgICBcbiAgICB0aGlzLmJ0bk1pbnVzZXJJdGVtID0gZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgaWYodGhpcy5pdGVtTGlzdFtpXS5hbW91bnQ8PTEpe1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2pzLWNvdW50LSR7aX1gKS5pbm5lckhUTUwgPS0tdGhpcy5pdGVtTGlzdFtpXS5hbW91bnQgXG4gICAgICAgIHRoaXMudXBkYXRlRGF0YVRvU3RvcmFnZSgpO1xuICAgICAgICB0aGlzLmNvdW50UmVuZGVyKGkpXG4gICAgfVxuICAgIFxuICAgIHRoaXMuZGVsZXRlSXRlbSA9IGZ1bmN0aW9uIChpLHBpZCkge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjanMtaXRlbS0ke2l9YCkucmVtb3ZlKClcbiAgICAgICAgY29uc3QgaWR4UmVtb3ZlID0gdGhpcy5pdGVtTGlzdC5maW5kSW5kZXgoKGl0ZW0pPT5pdGVtLmlkPT09cGlkKVxuICAgICAgICB0aGlzLml0ZW1MaXN0LnNwbGljZShpZHhSZW1vdmUsMSk7XG4gICAgICAgIHRoaXMudXBkYXRlVG90YWwoKTtcbiAgICAgICAgdGhpcy5jYXJ0TnVtYmVyUmVuZGVyKCk7XG4gICAgICAgIHRoaXMudXBkYXRlRGF0YVRvU3RvcmFnZSgpO1xuICAgIH1cbiAgXG4gICAgdGhpcy51cGRhdGVEYXRhVG9TdG9yYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBkYXRhU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkodGhpcy5pdGVtTGlzdCk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMua2V5LCBkYXRhU3RyaW5nKTtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVRvdGFsPWZ1bmN0aW9uKCl7XG4gICAgICAgIGxldCBjYXJ0VmFsdWUgPSAwO1xuICAgICAgICBsZXQgY2FydFN1bSA9IDA7XG4gICAgICAgIGxldCBmZWUgPSAzMDA7XG4gICAgICAgIHRoaXMuaXRlbUxpc3QuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtVmFsdWUgPSBpdGVtLnByaWNlICogaXRlbS5hbW91bnRcbiAgICAgICAgICAgIGNhcnRWYWx1ZSArPSBpdGVtVmFsdWU7XG4gICAgICAgICAgICBjYXJ0U3VtID0gY2FydFZhbHVlICsgZmVlO1xuICAgICAgICB9KVxuICAgICAgICBqc1RvdGFsLmlubmVySFRNTCA9IGBOVCQgJHtjYXJ0VmFsdWV9YFxuICAgICAgICBqc0ZlZS5pbm5lckhUTUwgPSBgTlQkICR7ZmVlfWBcbiAgICAgICAganNTdW0uaW5uZXJIVE1MID0gYE5UJCAke2NhcnRTdW19YFxuICAgIH1cblxuICAgIHRoaXMuY291bnRSZW5kZXIgPWZ1bmN0aW9uIChpKXtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2pzLXZhbHVlLSR7aX1gKS5pbm5lckhUTUwgPWBOVCQgJHt0aGlzLml0ZW1MaXN0W2ldLmFtb3VudCp0aGlzLml0ZW1MaXN0W2ldLnByaWNlfWBcbiAgICAgICAgdGhpcy51cGRhdGVUb3RhbCgpO1xuICAgIH1cbiAgICB0aGlzLmNhcnROdW1iZXJSZW5kZXIgPWZ1bmN0aW9uICgpe1xuICAgICAgICBjYXJ0TnVtYmVyLmlubmVySFRNTD1gXG4gICAgICAgIDxzcGFuIGNsYXNzPVwiY2FydC1udW1iZXItc2l6ZSByb3VuZGVkLWNpcmNsZSB3LTUgaC01IHBvc2l0aW9uLWFic29sdXRlIHRleHQtY2VudGVyIHRleHQtcHJpbWFyeSBiZy1zZWNvbmRhcnkgZnotMjRcIj4gXG4gICAgICAgICR7dGhpcy5pdGVtTGlzdC5sZW5ndGh9XG4gICAgICAgICA8L3NwYW4+XG4gICAgICAgICBgXG4gICAgfVxuXG4gICAgdGhpcy5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7IFxuICAgICAgICB0aGlzLmNhcnROdW1iZXJSZW5kZXIoKTtcbiAgICAgICAgbGV0IGNhcnRWYWx1ZSA9IDA7XG4gICAgICAgIGxldCBjYXJ0U3VtID0gMDtcbiAgICAgICAgbGV0IGZlZT0zMDA7XG4gICAgICAgIGxldCBzdHI7XG4gICAgICAgIGxldCBzaHA7XG4gICAgICAgIHRoaXMuaXRlbUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaWR4KSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtVmFsdWUgPSBpdGVtLnByaWNlICogaXRlbS5hbW91bnRcbiAgICAgICAgICAgIGNhcnRWYWx1ZSArPSBpdGVtVmFsdWU7XG4gICAgICAgICAgICBjYXJ0U3VtID0gY2FydFZhbHVlK2ZlZTtcbiAgICAgICAgICAgIGNvbnN0IHRyID1cbiAgICAgICAgYCAgIFxuICAgICAgICAgPGxpIGlkPVwianMtaXRlbS0ke2lkeH1cIiBjbGFzcz1cIiByb3cgZy0wIGNvbC1tZC0xMiBtYi0yIHBiLTIgbXgtMCBweC0wIGJvcmRlci1jYXJ0IGJvcmRlci1zZWNvbmRhcnkgdGV4dC1wcmltYXJ5IGFsaWduLWl0ZW1zLWNlbnRlciAganVzdGlmeS1jb250ZW50LWJldHdlZW4gZmYtcGluZy1mYW5nLXRjLXNlbWlib2xkICBcIj5cbiAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC02IGNvbC1tZC0zIHBsLTBcIj5cbiAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7aXRlbS5pbWdVcmx9XCIgY2xhc3M9XCJjYXJ0LWltZyB3LTEwMCBcIj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiIHJvdyBnLTAgY29sLTYgY29sLW1kLTYgZmYtcGluZy1mYW5nLXRjLWxpZ2h0IGFsaWduLWl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtbWQtNiBcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZ6LTIwcHhcIj4ke2l0ZW0uaXRlbU5hbWV9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmZi1IZWx2ZXRpY2EtbmV1ZS1yZWd1bGFyIHB5LTJweFwiPk5UJCAke2l0ZW0ucHJpY2V9PC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTYgZC1mbGV4ICBcIj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiAgZGF0YS1taW51c2VyPVwiJHtpZHh9XCIgY2xhc3M9XCIganMtbWludXNlciAgdy02IGgtNiBmZi1waW5nLWZhbmctdGMtbGlnaHQgYm9yZGVyIGJvcmRlci1yaWdodC0wIHRleHQtY2VudGVyIGJ0bi1hY3RpdmVcIj48aSBjbGFzcz1cImljb24gaWNvbi1taW51cyB0ZXh0LXByaW1hcnkgcG9pbnRlci1ldmVudHMtbm9uZVwiPjwvaT48L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD1cImpzLWNvdW50LSR7aWR4fVwiIGNsYXNzPVwiZC1mbGV4IGp1c3RpZnktY29udGVudC1jZW50ZXIgYWxpZ24taXRlbXMtY2VudGVyIHctNiBoLTYgZmYtcGluZy1mYW5nLXRjLWxpZ2h0IGJvcmRlciBib3JkZXItcmlnaHQtMFwiPiR7aXRlbS5hbW91bnR9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gIGRhdGEtYWRkZXI9XCIke2lkeH1cIiBjbGFzcz1cIiBqcy1hZGRlciAgdy02IGgtNiBmZi1waW5nLWZhbmctdGMtbGlnaHQgIGJvcmRlciB0ZXh0LWNlbnRlciBidG4tYWN0aXZlXCI+PGkgY2xhc3M9XCJpY29uIGljb24tYWRkIHRleHQtcHJpbWFyeSBwb2ludGVyLWV2ZW50cy1ub25lXCI+PC9pPjwvYnV0dG9uPjwvYnV0dG9uPiBcbiAgICAgICAgICAgICAgICA8L2Rpdj4gICBcbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTEyIGNvbC1tZC0zIGQtZmxleCAgcHgtMFwiPiBcbiAgICAgICAgICAgICAgICAgICAgPGRpdiAgaWQ9XCJqcy12YWx1ZS0ke2lkeH1cIiBjbGFzcz1cInByaWNlLWJvcmRlciBjb2wtbWQtMTAgZnotMjBweCBweS0xIGJvcmRlciBib3JkZXItc2Vjb25kYXJ5IGJvcmRlci1yaWdodC0wIGJvcmRlci1sZWZ0LTAgIHRleHQtcmlnaHQgdGV4dC1tZC1sZWZ0IFwiPlxuICAgICAgICAgICAgICAgICAgICBOVCQgJHtpdGVtVmFsdWV9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwianMtYnRuXCIgY2xhc3M9XCJjb2wtbWQtMiBkLW5vbmUgZC1tZC1ibG9jayB0ZXh0LXJpZ2h0IHByLTAgXCIgZGF0YS1idG49XCIke2lkeH1cIiBkYXRhLXBpZD1cIiR7aXRlbS5pZH1cIiA+PGltZyBzcmM9XCIuL2ltZy90cmFzaC5zdmdcIiBhbHQ9XCJcImNsYXNzPVwicG9pbnRlci1ldmVudHMtbm9uZSB3LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj4gXG4gICAgICAgIDwvbGk+XG4gICAgICAgIGBcbiAgICAgICAgY29uc3QgbGlzdD1cbiAgICAgICAgYFxuICAgICAgICAgICAgIDxsaSBpZD1cImpzLWl0ZW0tJHtpZHh9XCIgY2xhc3M9XCIgcm93IGctMCBteC0wIHB4LTAgY29sLW1kLTEyICBhbGlnbi1pdGVtcy1jZW50ZXIgZmYtcGluZy1mYW5nLXRjLXNlbWlib2xkICBcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTYgXCI+XG4gICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtpdGVtLmltZ1VybH1cIiBjbGFzcz1cImNhcnQtaW1nIHctMTAwIGgtMTAgcHgtMlwiPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCIgcm93IGctMCBjb2wtbWQtNiBmZi1waW5nLWZhbmctdGMtbGlnaHQgXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZnotMTZweFwiPiR7aXRlbS5pdGVtTmFtZX0mbmJzcDsgKCR7aXRlbS5hbW91bnR9KTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD1cImpzLXZhbHVlLSR7aWR4fVwiIGNsYXNzPVwiZnotMjBweCB0ZXh0LWxlZnRcIj5OVCQgJHtpdGVtVmFsdWV9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgYDtcbiAgICAgICAgc3RyPXRyXG4gICAgICAgIGlmKGNhcnRMaXN0KXtcbiAgICAgICAgICAgIGNhcnRMaXN0LmlubmVySFRNTCs9c3RyO1xuICAgICAgICB9XG4gICAgICAgIHNocD1saXN0XG4gICAgICAgIGlmKHNob3BwaW5nTGlzdCl7XG4gICAgICAgICAgICBzaG9wcGluZ0xpc3QuaW5uZXJIVE1MKz1zaHA7XG4gICAgICAgIH1cbiAgICAgIFxuICAgIH0pO1xuICAgICAgICBpZihjYXJ0T3JkZXIpe1xuICAgICAgICAgICAganNUb3RhbC5pbm5lckhUTUwgPWBOVCQgJHtjYXJ0VmFsdWV9YFxuICAgICAgICAgICAganNGZWUuaW5uZXJIVE1MID1gTlQkICR7ZmVlfWBcbiAgICAgICAgICAgIGpzU3VtLmlubmVySFRNTCA9YE5UJCAke2NhcnRTdW19YCBcbiAgICAgICAgfVxuICAgIH1cbn1cbmlmKHByb2R1Y3RSb3cpe1xuICAgIGZldGNoKCdhcGkvZGVzc2VydC5qc29uJykudGhlbihyZXNwID0+IHJlc3AuanNvbigpKS50aGVuKCh7IHByb2R1Y3RzIH0pID0+IHtcbiAgICAgICAgcHJvZHVjdHNEYXRhID0gcHJvZHVjdHNcbiAgICAgICAgbGV0IHN0cj1cIiBcIlxuICAgICAgICBwcm9kdWN0c0RhdGEuZm9yRWFjaCgocHJvZHVjdCxpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2FyZCA9Y3JlYXRlUHJvZHVjdENhcmQocHJvZHVjdCxpbmRleClcbiAgICAgICAgICAgICBzdHIrPWNhcmRcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpZihwcm9kdWN0Um93KXtcbiAgICAgICAgICAgIHByb2R1Y3RSb3cuaW5uZXJIVE1MPXN0cjsgXG4gICAgICAgIH1cblxuICAgICAgICBwcm9kdWN0Um93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGlmKGUudGFyZ2V0LmRhdGFzZXQuYWRkYnRuKXtcbiAgICAgICAgICAgICAgICBjb25zdCBjYXJ0SWQ9ZS50YXJnZXQuZGF0YXNldC5jYXJ0KjEgIFxuICAgICAgICAgICAgICAgIGNhcnQuYWRkSXRlbShlLnRhcmdldC5kYXRhc2V0LmFkZGJ0bixjYXJ0SWQpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pOyBcbiAgICB9KTtcbn1cbiAgICBcbmNvbnN0IGNhcnQgPSBuZXcgQ2FydCgpO1xuY2FydC5pbml0Q2FydCgpO1xuICAgICBcbmlmKGNhcnRMaXN0KXsgICAgICAgIFxuICAgIGNhcnRMaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXRcbiAgICAgICAgbGV0IGluZGV4XG4gICAgICAgIGlmICh0YXJnZXQubWF0Y2hlcygnLmpzLWFkZGVyJykpIHtcbiAgICAgICAgICAgIGluZGV4ID0gdGFyZ2V0LmRhdGFzZXQuYWRkZXJcbiAgICAgICAgICAgIGNhcnQuYnRuQWRkSXRlbShpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhcmdldC5tYXRjaGVzKCcuanMtbWludXNlcicpKSB7XG4gICAgICAgICAgICBpbmRleCA9IHRhcmdldC5kYXRhc2V0Lm1pbnVzZXJcbiAgICAgICAgICAgIGNhcnQuYnRuTWludXNlckl0ZW0oaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YXJnZXQubWF0Y2hlcygnI2pzLWJ0bicpKSB7XG4gICAgICAgICAgICBjb25zdCBpc0NvbmZpcm0gPSBjb25maXJtKCfnorrlrpropoHliKrpmaTll47vvJ8nKVxuICAgICAgICAgICAgaW5kZXggPSB0YXJnZXQuZGF0YXNldC5idG5cbiAgICAgICAgICAgIGNvbnN0IHBpZCA9IHRhcmdldC5kYXRhc2V0LnBpZCoxXG4gICAgICAgICAgICBpZiAoaXNDb25maXJtKSB7XG4gICAgICAgICAgICBjYXJ0LmRlbGV0ZUl0ZW0oaW5kZXgscGlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSAgICBcbiAgICB9KVxufSAgICAiXX0=
