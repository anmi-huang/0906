!function r(e,n,t){function i(a,o){if(!n[a]){if(!e[a]){var s="function"==typeof require&&require;if(!o&&s)return s(a,!0);if(u)return u(a,!0);throw new Error("Cannot find module '"+a+"'")}var f=n[a]={exports:{}};e[a][0].call(f.exports,function(r){var n=e[a][1][r];return i(n?n:r)},f,f.exports,r,e,n,t)}return n[a].exports}for(var u="function"==typeof require&&require,a=0;a<t.length;a++)i(t[a]);return i}({1:[function(r,e,n){"use strict";$.validator.setDefaults({submitHandler:function(){alert("提交事件!")}}),$().ready(function(){$("#form-id").validate({submitHandler:function(r){alert("提交事件!"),r.submit()},rules:{firstname:"required",lastname:"required",address:"required",phone:{required:!0,min:10}},messages:{firstname:"請輸入您的名字",lastname:"請輸入您的姓氏",address:"請輸入您的地址",phone:{required:"請輸入電話",minlength:"必需有10個數字"}}})})},{}]},{},[1]);
!function t(n,e,i){function r(a,o){if(!e[a]){if(!n[a]){var s="function"==typeof require&&require;if(!o&&s)return s(a,!0);if(c)return c(a,!0);throw new Error("Cannot find module '"+a+"'")}var d=e[a]={exports:{}};n[a][0].call(d.exports,function(t){var e=n[a][1][t];return r(e?e:t)},d,d.exports,t,n,e,i)}return e[a].exports}for(var c="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,n,e){"use strict";function i(t,n){return'\n  <li class="col-md-6 mb-3 ">\n    <div class="card border border-secondary">\n        <a href="#" class="text-decoration-none ">\n            <div>\n                <img src="'.concat(t.imgUrl,'" class="img-card d-block position-relative w-100">\n            </div>\n            <div class="card-span position-absolute fz-16px">\n                <span class=" text-white fz-16px px-1 py-1">本日精選</span>\n            </div>\n            <div class="d-flex text-center text-primary fz-18px fz-md-20px">\n                <div class="flex-grow-1  ff-ping-fang-tc-light text-cart-font border border-secondary  border-right-0  border-left-0 py-1">').concat(t.itemName,'</div>\n                <div class="flex-grow-1  ff-ping-fang-tc-semibold border-secondary border border-right-0 py-1 ">NT$ ').concat(t.price,'</div>\n            </div>\n        </a>\n    \t<button id="js-product-btn" data-addbtn="').concat(n,'"  data-cart="').concat(t.id,'" class="js-product-row add-item-tr fz-22px fz-md-28px btn-add bg-secondary text-center text-primary w-100 py-2"id="btn-cart" >\n    \t\t\t加入購物車\n    \t</button>\n        <div class="btn-card position-absolute ">\n            <button >\n                <i class="far fa-heart fz-22px text-primary"></i>\n            </button>\n        </div>\n    </div>\n  </li>\n    ')}function r(){this.key="example-cart",this.key2="example-cart2",this.itemList=[],this.initCart=function(){var t=localStorage.getItem(this.key);t&&(this.itemList=JSON.parse(t)),this.render()},this.addItem=function(t,n){var e=this.itemList,i=o[t];console.log(i);var r=e.findIndex(function(t){return t.id===n});if(e[r])e[r].amount+=1;else{var c=i;c.amount=1,this.itemList.push(c)}this.updateDataToStorage(),this.cartNumberRender()},this.btnAddItem=function(t){document.querySelector("#js-count-".concat(t)).innerHTML=++this.itemList[t].amount,this.updateDataToStorage(),this.countRender(t)},this.btnMinuserItem=function(t){this.itemList[t].amount<=1||(document.querySelector("#js-count-".concat(t)).innerHTML=--this.itemList[t].amount,this.updateDataToStorage(),this.countRender(t))},this.deleteItem=function(t,n){document.querySelector("#js-item-".concat(t)).remove();var e=this.itemList.findIndex(function(t){return t.id===n});this.itemList.splice(e,1),this.updateTotal(),this.cartNumberRender(),this.updateDataToStorage(),console.log(this.itemList)},this.updateDataToStorage=function(){var t=JSON.stringify(this.itemList);localStorage.setItem(this.key,t)},this.updateTotal=function(){var t=0,n=0,e=300;this.itemList.forEach(function(i){var r=i.price*i.amount;t+=r,n=t+e}),s.innerHTML="NT$ ".concat(t),d.innerHTML="NT$ ".concat(e),u.innerHTML="NT$ ".concat(n)},this.countRender=function(t){document.querySelector("#js-value-".concat(t)).innerHTML="NT$ ".concat(this.itemList[t].amount*this.itemList[t].price),console.log(this.itemList),this.updateTotal()},this.cartNumberRender=function(){l.innerHTML='\n        <span class="cart-number-size rounded-circle w-5 h-5 position-absolute text-center text-primary bg-secondary fz-24"> \n        '.concat(this.itemList.length,"\n         </span>\n         ")},this.render=function(){this.cartNumberRender();var t,n,e=0,i=0,r=300;this.itemList.forEach(function(c,a){var o=c.price*c.amount;e+=o,i=e+r;var s='   \n         <li id="js-item-'.concat(a,'" class=" row g-0 col-md-12 mb-2 pb-2 mx-0 px-0 border-cart border-secondary text-primary align-items-center  justify-content-between ff-ping-fang-tc-semibold  ">\n               \n            <div class="col-6 col-md-3 pl-0">\n                <img src="').concat(c.imgUrl,'" class="cart-img w-100 ">\n            </div>\n\n            <div class=" row g-0 col-6 col-md-6 ff-ping-fang-tc-light align-items-center">\n                <div class="col-md-6 ">\n                    <div class="fz-20px">').concat(c.itemName,'</div>\n                    <div class="ff-Helvetica-neue-regular py-2px">NT$ ').concat(c.price,'</div>\n                </div>\n\n                <div class="col-md-6 d-flex  ">\n                    <button  data-minuser="').concat(a,'" class=" js-minuser  w-6 h-6 ff-ping-fang-tc-light border border-right-0 text-center btn-active"><i class="icon icon-minus text-primary pointer-events-none"></i></button>\n                    <div id="js-count-').concat(a,'" class="d-flex justify-content-center align-items-center w-6 h-6 ff-ping-fang-tc-light border border-right-0">').concat(c.amount,'</div>\n                    <button  data-adder="').concat(a,'" class=" js-adder  w-6 h-6 ff-ping-fang-tc-light  border text-center btn-active"><i class="icon icon-add text-primary pointer-events-none"></i></button></button> \n                </div>   \n            </div>\n\n            <div class="col-12 col-md-3 d-flex  px-0"> \n                    <div  id="js-value-').concat(a,'" class="price-border col-md-10 fz-20px py-1 border border-secondary border-right-0 border-left-0  text-right text-md-left ">\n                    NT$ ').concat(o,'\n                    </div>\n                    <button id="js-btn" class="col-md-2 d-none d-md-block text-right pr-0 " data-btn="').concat(a,'" data-pid="').concat(c.id,'" ><img src="./img/trash.svg" alt=""class="pointer-events-none w-2">\n                    </button>\n            </div> \n        </li>\n        '),d='\n            <li id="js-item-'.concat(a,'" class=" row g-0 mx-0 px-0 col-md-12  align-items-center ff-ping-fang-tc-semibold  ">\n                <div class="col-md-6 ">\n                    <img src="').concat(c.imgUrl,'" class="cart-img w-100 h-10 px-2">\n                </div>\n                <div class=" row g-0 col-md-6 ff-ping-fang-tc-light ">\n                    <div>\n                        <div class="fz-16px">').concat(c.itemName,"  (").concat(c.amount,')</div>\n                        <div  id="js-value-').concat(a,'" class="fz-20px text-left">NT$ ').concat(o,"</div>\n                    </div>\n                </div>\n            </li>");t=s,f&&(f.innerHTML+=t),n=d,v&&(v.innerHTML+=n)}),m&&(s.innerHTML="NT$ ".concat(e),d.innerHTML="NT$ ".concat(r),u.innerHTML="NT$ ".concat(i))}}function c(t){x.innerHTML=t.map(function(t,n){return'<option value="'.concat(n,'">').concat(t.name,"</option>")}).join(""),x.addEventListener("change",function(t){a(t.target.value)}),x.value=17,a(17)}function a(t){y.innerHTML=g[t].districts.map(function(t,n){return'<option value="'.concat(n,'">').concat(t.name,"</option>")}).join("")}var o,s=document.querySelector("#js-total"),d=document.querySelector("#js-fee"),u=document.querySelector("#js-sum"),l=document.querySelector("#cart-number"),m=document.querySelector("#cart-order"),f=document.querySelector("#cart-list"),p=(document.querySelector(".js-product-row"),document.querySelector("#product-row")),v=(document.querySelector("#js-product-btn"),document.querySelector("#shopping-list"));p&&fetch("api/dessert.json").then(function(t){return t.json()}).then(function(t){var n=t.products;o=n;var e=" ";o.forEach(function(t,n){var r=i(t,n);e+=r}),p&&(p.innerHTML=e),p.addEventListener("click",function(t){if(t.target.dataset.addbtn){var n=1*t.target.dataset.cart;h.addItem(t.target.dataset.addbtn,n)}})});var h=new r;h.initCart(),f&&f.addEventListener("click",function(t){var n,e=t.target;if(e.matches(".js-adder")&&(n=e.dataset.adder,h.btnAddItem(n)),e.matches(".js-minuser")&&(n=e.dataset.minuser,h.btnMinuserItem(n)),e.matches("#js-btn")){var i=confirm("確定要刪除嗎？");n=e.dataset.btn;var r=1*e.dataset.pid;i&&h.deleteItem(n,r)}});var g,b=document.querySelector("#form-id"),x=document.querySelector("#city-select"),y=document.querySelector("#city-area");b&&fetch("./api/taiwan_districts.json").then(function(t){return t.json()}).then(function(t){var n=t.data;g=n,c(g)})},{}]},{},[1]);