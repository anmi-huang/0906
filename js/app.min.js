!function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);throw new Error("Cannot find module '"+i+"'")}var a=n[i]={exports:{}};e[i][0].call(a.exports,function(r){var n=e[i][1][r];return o(n?n:r)},a,a.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(r,e,n){"use strict"},{}]},{},[1]);
!function t(n,e,i){function r(c,s){if(!e[c]){if(!n[c]){var o="function"==typeof require&&require;if(!s&&o)return o(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+c+"'")}var d=e[c]={exports:{}};n[c][0].call(d.exports,function(t){var e=n[c][1][t];return r(e?e:t)},d,d.exports,t,n,e,i)}return e[c].exports}for(var a="function"==typeof require&&require,c=0;c<i.length;c++)r(i[c]);return r}({1:[function(t,n,e){"use strict";function i(t){var n='\n             <div class="col-md-6 mb-3">\n             \n             <ul class="card border border-secondary">\n             <a href="#" class="text-decoration-none ">\n                 <li>\n                     <img src="'.concat(t.imgUrl,'" class="img-card d-block position-relative w-100">\n                 </li>\n                 <li class="text-card position-absolute fz-16px">\n                     <span class=" text-white fz-16px px-1 py-1">本日精選</span>\n                 </li>\n                 <li class="d-flex text-center text-primary fz-18px fz-md-20px">\n                    <div class="flex-grow-1  ff-ping-fang-tc-light text-cart-font border border-secondary  border-right-0  border-left-0 py-1">').concat(t.itemName,'</div>\n                    <div class="flex-grow-1  ff-ping-fang-tc-semibold border-secondary border border-right-0 py-1 ">NT$ ').concat(t.price,'</div>\n                 </li>\n            </a>\n            <form data-product-id="').concat(t.id,'" class="add-item-tr">\n                 <li class="fz-22px fz-md-28px">\n                 <button class="bg-secondary text-center text-primary w-100 py-2"id="btn-cart" type="submit">\n                     加入購物車\n                 </button>\n                 </li>\n             </form>\n                 <li class="btn-card position-absolute">\n                   <button >\n                     <i class="far fa-heart fz-22px text-primary"></i>\n                   </button>\n                 </li>\n         </ul>\n            </div>\n    ');return n}var r,a=document.querySelector("#product-row"),c=document.querySelector("#countnum");fetch("api/dessert.json").then(function(t){return t.json()}).then(function(t){function n(){this.key="example-cart",this.itemList=[],this.initCart=function(){var t=localStorage.getItem(this.key);t&&(this.itemList=JSON.parse(t)),this.render()},this.addItem=function(t,n){var e=r.find(function(n){return n.id==t}),i={imgUrl:e.imgUrl,itemName:e.itemName,price:e.price,pid:t,amount:n};this.itemList.push(i),console.log(this.itemList),this.render()},this.addItemCart=function(t,n){},this.deleteItem=function(t){this.itemList.splice(t,1),this.render()},this.updateDataToStorage=function(){var t=JSON.stringify(this.itemList);localStorage.setItem(this.key,t)},this.adder=function(){var t=c.innerHTML;t=parseInt(t)+1,c.innerHTML=t},this.minuser=function(){var t=c.innerHTML;t=t<=0?0:parseInt(t)-1,c.innerHTML=t},this.render=function(){this.updateDataToStorage(),$("#cartNumber").html('\n                <span class="cartNumber1"> \n                '.concat(this.itemList.length,"\n                 </span>"));var t=$("#cart-list"),n=$("#cart-order");t.empty();var e=0,i=0,r=300;this.itemList.forEach(function(n,a){console.log(n);var c=n.price*n.amount;e+=c,i=e+r;var s='   <div class="col-md-12 py-3 border border-top-0 border-right-0 border-left-0  border-secondary text-primary ">\n                    <table class="w-100">\n                    <tboby class="row">\n                           <tr class="ff-ping-fang-tc-light fz-20x fz-md-20px ">\n                               <td><img src="'.concat(n.imgUrl,'" class="img-cart d-block mx-0 ">\n                               </td>\n                               <td>\n                                   <ul class="px-4">\n                                   <li class="py-0">').concat(n.itemName,'</li>\n                                   <li class=" py-0 fz-16x fz-md-16px">NT$ ').concat(n.price,'</li>\n                                   </ul> \n                                </td>\n                                <td>\n                                  <div class=" button-list d-flex justify-content-center ff-ping-fang-tc-light fz-16x fz-md-16px ">\n                                  <ul class="counter">\n                                  <li id="minus"><input type="button" onclick="minuser()" value="-"/></li>\n                                  <li id="amount-input').concat(n.id,'"class="countnum">1</li>\n                                  <li id="plus"><input type="button" onclick="adder()" value="+"/></li>\n                                  </ul>\n                                  </div>\n                                </td>\n                                <td>\n                                   <div class="ff-ping-fang-tc-semibold py-1 px-3 text-center ">NT$ ').concat(n.price,'</div>\n                                </td>\n                                <td>\n                                   <button data-item-index="').concat(a,'" ><img src="./img/trash.svg" alt="" class=" remove-btn w-2 "></button>\n                                </td>\n                           </tr>\n                    </tboby>\n                    </table>  \n                    </div> ');t.append(s)}),n.html('<table class="w-100">\n                        <p>訂單摘要</p>\n                        <hr>\n                        <tboby>\n                            <tr class=" ff-ping-fang-tc-light fz-16x fz-md-16px">\n                                <td>小計</td>\n                                <td class="text-right">NT$ '.concat(e,' </td>\n                            </tr>\n                            <tr class=" ff-ping-fang-tc-light fz-16x fz-md-16px">\n                                <td>運費</td>\n                                <td class="text-right">NT ').concat(r,' </td>\n                            </tr>\n                        </tboby>\n                        <tfoot class="fz-20x fz-md-20px ">\n                            <td class="pt-2">總計</td>\n                            <td class="pt-2 text-right">NT$ ').concat(i," </td>\n                        </tfoot>\n                    </table> "))}}var e=t.products;r=e;var s=" ";r.forEach(function(t){var n=i(t);s+=n}),a&&(a.innerHTML=s);var o=new n;o.initCart(),$("#product-row form").submit(function(t){t.preventDefault();var n=$(this).attr("data-product-id"),e=1;o.addItem(n,e)}),$(".add-item-tr").submit(function(t){t.preventDefault()}),$("#cart-list").delegate(".remove-btn","click",function(){var t=$(this).attr("data-item-index");t=parseInt(t),o.deleteItem(t)}),$("#cart-list").delegate(".remove-btn","click",function(){var t=$(this).attr("data-item-index");t=parseInt(t),o.deleteItem(t)})})},{}]},{},[1]);